<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
{{info.commodity_name}}
</title>
<style type="text/css">
body{
	margin::0;
	height:100%;
}
html{
	height::100%;
}
.content{
	font-family: Consolas, "Andale Mono", "Lucida Console", "Lucida Sans Typewriter", Monaco, "Courier New", monospace;
	text-align:left;
}
#top {
	font-family: Consolas, "Andale Mono", "Lucida Console", "Lucida Sans Typewriter", Monaco, "Courier New", monospace;
	width: 100%;
	height: 35px;
	background-color: #333333;
	color: #FFFFFF;
	text-align: center;
	padding: 0px;
	margin: 0px;
	position: relative;
	font-size: medium;
	line-height: 36px;
}
#center {
	height: 250px;
	width:1100px;
	background-color: #013773;
	text-align: center;
	position:absolute; 
	left:150px; 
	top: 80px;
}
#bottom {
	height: 950px;
	width:1100px;
	text-align: center;
	position:absolute; 
	position:absolute; 
	top: 330px;
	left:150px; 
}
#pic{
	float:left;
	width: 300px;
	height: 250px;
	text-align:center;
	position:relative;
}
#img{
	width:200px;
	margin:0 auto;
	position:absolute;   
	top:25px; 
	left:50px;  
	height:200px;    
	margin-top:0 auto;
}
#commodity_info{
	height: 250px;
}
#name_{
	position: absolute;
	top: 20px;
	font-size: 26px;
	color: white;
	vertical-align: middle;
	width: 72%;
}
#avg_price{
	font-size:22px;
	color: white;
	vertical-align:middle;
	line-height:70px;
}
#sales{
	font-size:22px;
	color: white;
	vertical-align:middle;
	line-height:30px;
}
#left{
	width:250px;
	margin:0 auto;
	position:absolute;   
	top:100px; 
	left:350px;  
	height:200px;    
	margin-top:0 auto;
}
#right{
	width:200px;
	margin:0 auto;
	position:absolute;   
	top:120px; 
	left:720px;  
	height:200px;    
	margin-top:0 auto;
}
#star_bk{
	width:160px;
	height:100px;
	background-image: url(/static/images/star_bk.png);
	background-repeat:no-repeat;
}
#star{
	width:160px;
	height:50px;
	background-image: url(/static/images/star.png);
	background-repeat:no-repeat;
}
#star_count{
	width:auto;
	margin-left: auto;
	margin-right: auto;
	position:absolute;  
	left:40px;
	font-size:20px;
	color: white;
}
#left_tab{
	float:left;
	width: 700px;
	height: 950px;
	text-align:center;
	position:relative;
}
#right_tab{
	float:left;
	width: 400px;
	height: 950px;
	text-align:center;
	position:relative;
}
#price_tab{
	width: 650px;
	height:450px;
	text-align:center;
	position:relative;
	background-color:gray;
}
#sales_tab{
	width: 650px;
	height:450px;
	top:50px;
	text-align:center;
	position:relative;
	background-color:green;
}
#stars_tab{
	width: 400px;
	height:450px;
	text-align:center;
	position:relative;
	background-color:red;
}
#relation_tab{
	width: 400px;
	height:450px;
	top:50px;
	text-align:center;
	position:relative;
	background-color:pink;
}
</style>
   <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
   <script type="text/javascript" src="http://code.highcharts.com/highcharts.js"></script>
<script>
	$(function () {
 $('#price_tab').highcharts({
               title: {
            text: 'Price change from {{earliest_date}} throuth {{latest_date}}',
            x: -20 //center
        },
        xAxis: {
            categories: [
				{%for time in time_list%}				
					{{time}}
				,
				{%endfor%}
				
			]
        },
        yAxis: {
            title: {
                text: 'Price ($)'
            },
            plotLines: [{
                value: 0,
                width: 1,
                color: '#808080'
            }]
        },
        tooltip: {
            valueSuffix: '$'
        },
        legend: {
            layout: 'vertical',
            align: 'right',
            verticalAlign: 'middle',
            borderWidth: 0
        },
        series: [{
            name: 'Max Price',
            data: [
				{%for high in highest_price%}
					{{high}}
				,
				{%endfor%}
			]
        }, {
            name: 'Min Price',
            data: [
				{%for low in lowest_price%}
					{{low}}
				,
				{%endfor%}
			]
        },{
            name: 'Average Price',
            data: [
				{%for avg in avg_price%}
					{{avg}}
				,
				{%endfor%}
			]
        }]
    });
	 $('#sales_tab').highcharts({
         chart: {
            type: 'spline'
        },
        title: {
            text: 'sales change from xxxx through ????'
        },
        xAxis: {
            type: 'datetime',
            dateTimeLabelFormats: { // don't display the dummy year
                month: '%e. %b',
                year: '%b'
            }
        },
        yAxis: {
            title: {
                text: 'Sales'
            },
            min: 0
        },
        tooltip: {
            formatter: function() {
                    return '<b>'+ this.series.name +'</b><br>'+
                    Highcharts.dateFormat('%e. %b', this.x) +': '+ this.y +' m';
            }
        },
        
        series: [{
            name: 'dates',
            data: [
                [Date.UTC(1970,  9, 27), 0   ],
                [Date.UTC(1970, 10, 10), 0.6 ],
                [Date.UTC(1970, 10, 18), 0.7 ],
                [Date.UTC(1970, 11,  2), 0.8 ],
                [Date.UTC(1970, 11,  9), 0.6 ],
                [Date.UTC(1970, 11, 16), 0.6 ],
                [Date.UTC(1970, 11, 28), 0.67],
                [Date.UTC(1971,  0,  1), 0.81],
                [Date.UTC(1971,  0,  8), 0.78],
                [Date.UTC(1971,  0, 12), 0.98],
                [Date.UTC(1971,  0, 27), 1.84],
                [Date.UTC(1971,  1, 10), 1.80],
                [Date.UTC(1971,  1, 18), 1.80],
                [Date.UTC(1971,  1, 24), 1.92],
                [Date.UTC(1971,  2,  4), 2.49],
                [Date.UTC(1971,  2, 11), 2.79],
                [Date.UTC(1971,  2, 15), 2.73],
                [Date.UTC(1971,  2, 25), 2.61],
                [Date.UTC(1971,  3,  2), 2.76],
                [Date.UTC(1971,  3,  6), 2.82],
                [Date.UTC(1971,  3, 13), 2.8 ],
                [Date.UTC(1971,  4,  3), 2.1 ],
                [Date.UTC(1971,  4, 26), 1.1 ],
                [Date.UTC(1971,  5,  9), 0.25],
                [Date.UTC(1971,  5, 12), 0   ]
            ]
        }]
    });
	$('#stars_tab').highcharts({
        chart: {
            type: 'column',
            margin: [ 50, 50, 100, 80]
        },
        title: {
            text: 'Stars Count'
        },
        xAxis: {
            categories: [
     			'1 star',
				'2 stars',
				'3 stars',
				'4 stars',
				'5 stars'
            ],
            labels: {
                rotation: -45,
                align: 'right',
                style: {
                    fontSize: '13px',
                    fontFamily: 'Verdana, sans-serif'
                }
            }
        },
        yAxis: {
            min: 0,
            title: {
                text: 'Count'
            }
        },
        legend: {
            enabled: false
        },
        tooltip: {
            pointFormat: 'Count: <b>{point.y:.1f} Peaple</b>',
        },
        series: [{
            name: 'Count',
            data: {{star_count}},
            dataLabels: {
                enabled: true,
                rotation: -90,
                color: '#FFFFFF',
                align: 'right',
                x: 4,
                y: 10,
                style: {
                    fontSize: '13px',
                    fontFamily: 'Verdana, sans-serif',
                    textShadow: '0 0 3px black'
                }
            }
        }]
    });
	 $('#relation_tab').highcharts({                                           
        chart: {                                                           
            type: 'bar'                                                    
        },                                                                 
        title: {                                                           
            text: 'Relational Commodities of {{info.commodity_name}}'                    
        },                                                                 
        subtitle: {                                                        
            text: 'The commodity customers buy when buying this'                                  
        },                                                                 
        xAxis: {                                                           
            categories: ['01','02','03','04','05','06','07','08','09','10'],
            title: {                                                       
                text: 'Commodities'                                                 
            }                                                              
        },                                                                 
        yAxis: {                                                           
            min: 0,                                                        
            title: {                                                       
                text: 'Count',                             
                align: 'high'                                              
            },                                                             
            labels: {                                                      
                overflow: 'justify'                                        
            }                                                              
        },                                                                                                                        
        plotOptions: {                                                     
            bar: {                                                         
                dataLabels: {                                              
                    enabled: true                                          
                }                                                          
            }                                                              
        },                                                                 
        legend: {                                                          
             enabled: false                                                   
        },                                                                 
        credits: {                                                         
            enabled: false                                                 
        },                                                                 
        series: [{                                                         
            name: 'Count',                                             
            data: [100,96,88,75,60,55,40,30,20,3]             
        }]                                                                 
    });          
});
</script>
</head>

<body style="margin: 0px;">
<div class="layout" id="top">Welcome to Amazon Index</div>
<div class="layout" id="center">
	<div class="content" id="pic">
    	<img id="img" src="{{info.commodity_img.0}}" />
    </div>
    <div class="content" id="commodity_info">
    	<div class="content" id="name">
        <a id = "name_" href="http://www.baidu.com/" target="_blank">{{info.commodity_name}}</a>
        </div>
        <div class="layout" id = "detail">
            <div class="layout" id="left">
                <div class="content" id="avg_price">
                Avg Price: ${{info.commodity_avg_price}}
                </div>
                <div class="content" id="sales">
                Sales: {{info.commodity_sales}}
                </div>
             </div>
             <div class="layout" id="right">
             	<div class = "content" id = "star_bk">
                    <div class = "content" id = "star" style="width:{{info.star_pic_width}}px">
                	</div>
                    <div class = "content" id = "star_count">
                    stars:{{info.commodity_avg_star}}
                    </div>
                </div>
             </div>
         </div>
            
    </div>
</div>
<div class="layout" id="bottom">
	<div class="layout" id="left_tab">
		<div class="content" id="price_tab" style="min-width:650px;height:450px;">
		</div>
		<div class="content" id="sales_tab" style="min-width:650px;height:450px;">
		</div>
	</div>
	<div class="layout" id="right_tab">
		<div class="content" id="stars_tab" style="min-width:400px;height:450px;">
		</div>
		<div class="content" id="relation_tab">
		</div>
	</div>
</div>
</body>
</html>
